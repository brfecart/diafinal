# Overview

This is a biometric mandala generation application that creates personalized spiritual artwork based on real-time brainwave data from EEG devices and voice input. The system captures EEG signals from NeuroSky devices, processes voice transcripts for meditation intentions, and uses AI services to generate custom mandala prompts that reflect the user's mental and emotional state during their meditation session.

# User Preferences

Preferred communication style: Simple, everyday language.

# System Architecture

## Frontend Architecture
- **React with TypeScript**: Modern React application using functional components, hooks, and strict TypeScript configuration for type safety and development efficiency
- **Vite Build System**: Fast development server with hot module replacement and optimized production builds, configured for Replit integration
- **Shadcn/ui Component Library**: Comprehensive UI components built on Radix UI primitives with dark theme support and accessibility features
- **TailwindCSS**: Utility-first CSS framework with custom color variables, responsive design, and dark mode theming
- **Wouter**: Lightweight client-side routing solution for single-page application navigation
- **React Query**: Server state management, caching, and synchronization for API interactions with automatic background refetching
- **Canvas Visualization**: HTML5 Canvas for real-time EEG waveform rendering and brainwave visualization with smooth animations

## Backend Architecture
- **Express.js Server**: RESTful API server with TypeScript support, comprehensive error handling, and middleware stack
- **WebSocket Integration**: Real-time bidirectional communication for streaming EEG data and device status updates
- **Modular Service Architecture**: Separate services for NeuroSky hardware integration, Gemini AI processing, and OpenAI fallback
- **In-Memory Storage**: Simple storage implementation with well-defined interfaces for future database integration
- **Shared Schema System**: Common TypeScript types and Zod validation schemas shared between frontend and backend

## Database Design
- **Drizzle ORM**: Type-safe database toolkit configured for PostgreSQL with schema migrations and query building
- **Session Management**: User sessions track complete meditation experiences with brainwave data and generated content
- **Mandala Records**: Generated artwork storage with associated prompts, timestamps, and biometric context data
- **EEG Data Storage**: Time-series brainwave data with attention, meditation, and signal quality metrics
- **Relational Structure**: Proper foreign key relationships between sessions, mandalas, and EEG readings for data integrity

## Core Features
- **Real-Time Biometric Monitoring**: Continuous EEG data capture from NeuroSky devices with WebSocket streaming to frontend
- **Voice Recognition**: Browser-based Web Speech API for meditation prompts and intention capture with Portuguese language support
- **AI-Powered Art Generation**: Primary Gemini AI integration with OpenAI fallback for intelligent mandala prompt creation based on biometric data
- **Device Management**: NeuroSky headset connection, status monitoring, demo mode support, and ThinkGear Connector integration
- **Mandala Gallery**: Image display, download functionality, QR code sharing, and generated artwork management

## Integration Patterns
- **Hardware Integration**: Serial/USB communication with NeuroSky devices via ThinkGear Connector local WebSocket server
- **AI Service Integration**: Primary Gemini AI with OpenAI fallback, retry logic, and error handling for prompt generation
- **Real-Time Data Flow**: WebSocket-based streaming architecture for continuous biometric feedback and device status
- **Responsive Design**: Mobile-first approach with adaptive layouts, touch-friendly interactions, and cross-device compatibility

# External Dependencies

## Hardware Integration
- **NeuroSky ThinkGear**: EEG headset connectivity via serial/USB interface for brainwave capture and monitoring
- **ThinkGear Connector**: Local WebSocket server for device communication on default port 13854

## AI Services
- **Google Gemini AI**: Primary AI service for mandala prompt generation using gemini-2.5-flash model
- **OpenAI**: Fallback AI service with GPT-5 model for prompt creation and image generation

## Third-Party Libraries
- **WebSocket (ws)**: Real-time communication library for EEG data streaming
- **QRCode**: QR code generation for mandala sharing functionality
- **React Query**: Data fetching and caching for API interactions
- **Radix UI**: Accessible component primitives for the UI library